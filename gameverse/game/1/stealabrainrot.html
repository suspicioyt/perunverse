<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steal a Brainrot</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            font-size: 2.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        #game-container {
            position: relative;
            width: 1000px;
            height: 800px;
            background: #1e293b;
            border-radius: 15px;
            border: 3px solid #60a5fa;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        #path {
            position: absolute;
            top: 100px;
            left: 0;
            width: 100%;
            height: 160px;
            background: linear-gradient(to right, #4b5563, #6b7280);
            border-top: 2px solid #9ca3af;
            border-bottom: 2px solid #9ca3af;
        }

        .brainrot, .lucky-block {
            position: absolute;
            width: 110px;
            height: 140px;
            background: #fff;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .brainrot:hover, .lucky-block:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .brainrot img, .lucky-block img {
            width: 50px;
            border-radius: 50%;
            border: 2px solid #fff;
        }

        .brainrot span, .lucky-block span {
            font-size: 12px;
            text-align: center;
            margin-top: 5px;
            color: #1e293b;
        }

        .common { background: linear-gradient(#d1d5db, #9ca3af); }
        .uncommon { background: linear-gradient(#6ee7b7, #34d399); }
        .rare { background: linear-gradient(#60a5fa, #3b82f6); }
        .epic { background: linear-gradient(#a78bfa, #7c3aed); }
        .legendary { background: linear-gradient(#facc15, #eab308); }
        .mythic { background: linear-gradient(#f87171, #ef4444); }
        .god { background: linear-gradient(#8b5cf6, #6d28d9); }
        .secret { background: linear-gradient(#f97316, #ea580c); }
        .og { background: linear-gradient(#ec4899, #db2777); }
        .admin { background: linear-gradient(#374151, #1f2937); color: #fff; }
        .exclusive { background: linear-gradient(#dc2626, #b91c1c); color: #fff; }
        .taco { background: linear-gradient(#f59e0b, #d97706); }
        .lucky-block { background: linear-gradient(#fef08a, #facc15); }

        #base {
            position: absolute;
            bottom: 50px;
            left: 100px;
            width: 800px;
            height: 400px;
            background: #2d3748;
            border-radius: 10px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            padding: 20px;
            border: 2px solid #4b5563;
        }

        .station {
            background: #4b5563;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: transform 0.2s, background 0.2s;
        }

        .station:hover {
            transform: scale(1.05);
        }

        .station.drag-over {
            background: #60a5fa;
            border: 2px solid #fff;
        }

        .station .brainrot {
            cursor: grab;
        }

        .station .brainrot:active {
            cursor: grabbing;
        }

        .station .money-bubble {
            position: absolute;
            top: -20px;
            background: #facc15;
            color: #1e293b;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 20px;
            cursor: pointer;
            display: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .station .money-bubble.visible {
            display: block;
        }

        #money, #income {
            font-size: 1.5rem;
            margin: 10px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        #controls {
            margin: 20px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            font-size: 1rem;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover {
            background: #2563eb;
        }

        #index-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #index-content {
            background: #1e293b;
            border-radius: 10px;
            padding: 20px;
            max-width: 90%;
            max-height: 80%;
            overflow: auto;
            color: #fff;
        }

        #index-controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }

        #index-search {
            padding: 8px;
            border-radius: 5px;
            border: none;
            width: 200px;
        }

        #index-sort, #index-filter {
            padding: 8px;
            border-radius: 5px;
            border: none;
        }

        .rarity-section {
            margin-bottom: 20px;
        }

        .rarity-section h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #60a5fa;
        }

        .index-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .index-item {
            text-align: center;
        }

        .index-item img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid #fff;
        }

        .index-item img:hover {
            transform: scale(1.1);
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #facc15;
            border-radius: 50%;
            pointer-events: none;
            animation: particleAnim 0.8s ease-out forwards;
        }

        @keyframes particleAnim {
            0% { opacity: 1; transform: translate(0, 0); }
            100% { opacity: 0; transform: translate(var(--dx), var(--dy)); }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal div {
            background: #1e293b;
            border-radius: 10px;
            padding: 20px;
            max-width: 400px;
            text-align: center;
            color: #fff;
        }

        .modal img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 2px solid #fff;
        }

        .modal h3 {
            font-size: 1.5rem;
            margin: 10px 0;
        }

        .modal p {
            font-size: 1rem;
            margin: 5px 0;
        }

        .modal button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Steal a Brainrot</h1>
    <div id="money">Pieniądze: 50</div>
    <div id="income">Dochód/s: 0</div>
    <div id="game-container">
        <div id="path"></div>
        <div id="base">
            <div class="station" id="station1"></div>
            <div class="station" id="station2"></div>
            <div class="station" id="station3"></div>
            <div class="station" id="station4"></div>
            <div class="station" id="station5"></div>
            <div class="station" id="station6"></div>
            <div class="station" id="station7"></div>
            <div class="station" id="station8"></div>
        </div>
    </div>
    <div id="controls">
        <button id="showIndex">Pokaż Index</button>
        <button id="resetGame">Resetuj Grę</button>
    </div>
    <div id="index-modal">
        <div id="index-content">
            <h2>Index</h2>
            <div id="index-controls">
                <input id="index-search" placeholder="Szukaj..." type="text">
                <select id="index-sort">
                    <option value="rarity-asc">Rzadkość rosnąco</option>
                    <option value="rarity-desc">Rzadkość malejąco</option>
                    <option value="name-asc">Nazwa A-Z</option>
                    <option value="name-desc">Nazwa Z-A</option>
                    <option value="value-asc">Wartość rosnąco</option>
                    <option value="value-desc">Wartość malejąco</option>
                </select>
                <select id="index-filter">
                    <option value="">Wszystkie</option>
                    <option value="common">Common</option>
                    <option value="rare">Rare</option>
                    <option value="epic">Epic</option>
                    <option value="legendary">Legendary</option>
                    <option value="mythic">Mythic</option>
                    <option value="god">God</option>
                    <option value="secret">Secret</option>
                    <option value="og">OG</option>
                    <option value="admin">Admin</option>
                    <option value="exclusive">Exclusive</option>
                    <option value="taco">Taco</option>
                </select>
            </div>
            <div id="index-sections"></div>
        </div>
    </div>
    <script src="https://suspicioyt.github.io/perunverse/data/localData.js"></script>
    <script>
        let money = 50;
        let brainrots = [];
        let luckyItems = [];
        let lastFrameTime = performance.now();
        let stations = Array.from({length: 8}, (_, i) => document.getElementById(`station${i+1}`));
        let incomePerSecond = 0;
        let unlocked = new Set();

        const moneyDisplay = document.getElementById('money');
        const incomeDisplay = document.getElementById('income');
        const gameContainer = document.getElementById('game-container');
        const indexSections = document.getElementById('index-sections');
        const indexModal = document.getElementById('index-modal');
        const showIndexButton = document.getElementById('showIndex');
        const resetGameButton = document.getElementById('resetGame');
        const indexSearch = document.getElementById('index-search');
        const indexSort = document.getElementById('index-sort');
        const indexFilter = document.getElementById('index-filter');

        const rarities = [
            { name: 'Noobini Pizzanini', color: 'common', value: 1, cost: 25, img: 'https://static.wikia.nocookie.net/stealabr/images/8/83/Noobini_Pizzanini_NEW.png/revision/latest/scale-to-width-down/137?cb=20250729183949' },
            { name: 'Lirilì Larilà', color: 'common', value: 3, cost: 250, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c8/Liliri_Lalira.png/revision/latest/scale-to-width-down/185?cb=20250729184448' },
            { name: 'Tim Cheese', color: 'common', value: 5, cost: 500, img: 'https://static.wikia.nocookie.net/stealabr/images/1/11/Tim_Cheese.png/revision/latest/scale-to-width-down/99?cb=20250729184731' },
            { name: 'Fluriflura', color: 'common', value: 7, cost: 750, img: 'https://static.wikia.nocookie.net/stealabr/images/7/77/Fluriflura.png/revision/latest/scale-to-width-down/132?cb=20250729184916' },
            { name: 'Talpa Di Fero', color: 'common', value: 9, cost: 1000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b1/Talpa_Di_Fero.png/revision/latest/scale-to-width-down/148?cb=20250729185233' },
            { name: 'Svinina Bombardino', color: 'common', value: 10, cost: 1200, img: 'https://static.wikia.nocookie.net/stealabr/images/2/26/Homicidio_doloso.png/revision/latest/scale-to-width-down/185?cb=20250729225915' },
            { name: 'Pipi Kiwi', color: 'common', value: 13, cost: 1500, img: 'https://static.wikia.nocookie.net/stealabr/images/9/92/Pipi_Kiwi.png/revision/latest/scale-to-width-down/170?cb=20250729231500' },
            { name: 'Pipi Corni', color: 'common', value: 14, cost: 1700, img: 'https://static.wikia.nocookie.net/stealabr/images/7/76/Pipi_Corni_%28v2%29.png/revision/latest/scale-to-width-down/124?cb=20250802222512' },
            { name: 'Trippi Troppi', color: 'rare', value: 15, cost: 2000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/f0/Trippi_Troppi.png/revision/latest/scale-to-width-down/178?cb=20250729232722' },
            { name: 'Tung Tung Tung Sahur', color: 'rare', value: 25, cost: 3000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e3/Tung_Tung_Tung_Sahur.png/revision/latest/scale-to-width-down/116?cb=20250729234830' },
            { name: 'Gangster Footera', color: 'rare', value: 30, cost: 4000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/1e/Gangster-Footera.png/revision/latest/scale-to-width-down/185?cb=20250730153125' },
            { name: 'Bandito Bobritto', color: 'rare', value: 35, cost: 4500, img: 'https://static.wikia.nocookie.net/stealabr/images/5/57/Messi.png/revision/latest/scale-to-width-down/98?cb=20250902175959' },
            { name: 'Boneca Ambalabu', color: 'rare', value: 40, cost: 5000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/9c/Boneca_Ambalabu.png/revision/latest/scale-to-width-down/139?cb=20250729231053' },
            { name: 'Cacto Hipopotamo', color: 'rare', value: 50, cost: 6500, img: 'https://static.wikia.nocookie.net/stealabr/images/a/af/Cacto_Hipopotamo1.png/revision/latest/scale-to-width-down/168?cb=20250826091108' },
            { name: 'Ta Ta Ta Ta Sahur', color: 'rare', value: 55, cost: 7500, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b2/TaTas.png/revision/latest/scale-to-width-down/162?cb=20250902182129' },
            { name: 'Tric-Trac-Baraboom', color: 'rare', value: 65, cost: 9000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/5a/Tric-Trac-Baraboom-5.png/revision/latest/scale-to-width-down/185?cb=20250730160553' },
            { name: 'Pipi Avocado', color: 'rare', value: 70, cost: 9500, img: 'https://static.wikia.nocookie.net/stealabr/images/9/91/Pipi_Avocado.png/revision/latest/scale-to-width-down/185?cb=20250809071511' },
            { name: 'Cappuccino Assassino', color: 'epic', value: 90, cost: 12500, img: 'https://static.wikia.nocookie.net/stealabr/images/7/73/Untitled212_20250809133414.png/revision/latest/scale-to-width-down/162?cb=20250809183502' },
            { name: 'Bandito Axolito', color: 'epic', value: 75, cost: 10000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b1/Bandito_Axolito1.png/revision/latest/scale-to-width-down/97?cb=20250907191724' },
            { name: 'Brr Brr Patapim', color: 'epic', value: 100, cost: 15000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/6d/Lil_wayne.png/revision/latest/scale-to-width-down/134?cb=20250902184123' },
            { name: 'Avocadini Antilopini', color: 'epic', value: 115, cost: 17500, img: 'https://static.wikia.nocookie.net/stealabr/images/1/1a/Avocadini_Antilopini.png/revision/latest/scale-to-width-down/138?cb=20250831081311' },
            { name: 'Trulimero Trulicina', color: 'epic', value: 125, cost: 20000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/fa/Untitled211_20250809125319.png/revision/latest/scale-to-width-down/179?cb=20250809181508' },
            { name: 'Bambini Crostini', color: 'epic', value: 140, cost: 23500, img: 'https://static.wikia.nocookie.net/stealabr/images/0/0a/Untitled208_20250808152208.png/revision/latest/scale-to-width-down/165?cb=20250808202302' },
            { name: 'Malame Amarele', color: 'epic', value: 150, cost: 25000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/28/MalameAmarele.png/revision/latest/scale-to-width-down/123?cb=20250907003733' },
            { name: 'Bananita Dolphinita', color: 'epic', value: 150, cost: 25000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b5/Banana_do.png/revision/latest/scale-to-width-down/138?cb=20250904135915' },
            { name: 'Perochello Lemonchello', color: 'epic', value: 160, cost: 27500, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a2/PeroLemonfulldetial.png/revision/latest/scale-to-width-down/185?cb=20250905124054' },
            { name: 'Brri Brri Bicus Dicus Bombicus', color: 'epic', value: 175, cost: 30000, img: 'https://static.wikia.nocookie.net/stealabr/images/4/4e/Berry_berry_bicus_dickus.png/revision/latest/scale-to-width-down/106?cb=20250902180219' },
            { name: 'Ti Ti Ti Sahur', color: 'epic', value: 225, cost: 37500, img: 'https://static.wikia.nocookie.net/stealabr/images/7/7c/Ti_ti_ti_shaur.png/revision/latest/scale-to-width-down/185?cb=20250803000527' },
            { name: 'Avocadini Guffo', color: 'epic', value: 225, cost: 35000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/f5/Avocadini-Guffo.png/revision/latest/scale-to-width-down/185?cb=20250730172827' },
            { name: 'Mangolini Parrocini', color: 'epic', value: 235, cost: 38500, img: 'https://static.wikia.nocookie.net/stealabr/images/9/94/Mangolini_Parrocini.png/revision/latest/scale-to-width-down/123?cb=20250907162145' },
            { name: 'Salamino Penguino', color: 'epic', value: 250, cost: 40000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/59/Salamino-Penguino.png/revision/latest/scale-to-width-down/185?cb=20250730172949' },
            { name: 'Penguino Cocosino', color: 'epic', value: 300, cost: 45000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/71/Penguino_Cocosino%28v2%29.png/revision/latest/scale-to-width-down/154?cb=20250803003356' },
            { name: 'Burbaloni Loliloli', color: 'legendary', value: 200, cost: 35000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/2d/Untitled209_20250808173522.png/revision/latest/scale-to-width-down/185?cb=20250808223948' },
            { name: 'Chimpazini Bananini', color: 'legendary', value: 300, cost: 50000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/94/Chimpanzini_Bananini_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728193926' },
            { name: 'Tirilikalika Tirilikalako', color: 'legendary', value: 450, cost: 75000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/fa/Static-assets-upload17861491443081516793-removebg-preview.png/revision/latest/scale-to-width-down/185?cb=20250911125414' },
            { name: 'Ballerina Cappuccina', color: 'legendary', value: 500, cost: 100000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b8/Untitled206_20250808150027.png/revision/latest/scale-to-width-down/185?cb=20250808200129' },
            { name: 'Chef Crabracadabra', color: 'legendary', value: 600, cost: 150000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/9d/Travis_scott.png/revision/latest/scale-to-width-down/170?cb=20250902183549' },
            { name: 'Lionel Cactuseli', color: 'legendary', value: 650, cost: 175000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/7d/Lionel-Cactuseli.png/revision/latest/scale-to-width-down/185?cb=20250730161749' },
            { name: 'Glorbo Fruttodrillo', color: 'legendary', value: 750, cost: 200000, img: 'https://static.wikia.nocookie.net/stealabr/images/d/da/GlorboFruttodrillo.png/revision/latest/scale-to-width-down/185?cb=20250821143713' },
            { name: 'Quivoli Ameleoni', color: 'legendary', value: 900, cost: 225000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/cd/Quivioli_Ameleonni.png/revision/latest/scale-to-width-down/185?cb=20250831171040' },
            { name: 'Blueberrini Octopusini', color: 'legendary', value: 1000, cost: 250000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c1/Giggity.png/revision/latest/scale-to-width-down/185?cb=20250902185926' },
            { name: 'Caramello Filtrello', color: 'legendary', value: 1000, cost: 255000, img: 'https://static.wikia.nocookie.net/stealabr/images/d/da/Caramello_Filtrello.png/revision/latest/scale-to-width-down/97?cb=20250907174947' },
            { name: 'Pipi Potato', color: 'legendary', value: 1100, cost: 256000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/ca/POTATO%21.png/revision/latest/scale-to-width-down/185?cb=20250824031139' },
            { name: 'Strawberrini Flamingelli', color: 'legendary', value: 1100, cost: 275000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c9/Strawberelli_Flamingelli.png/revision/latest/scale-to-width-down/146?cb=20250902011303' },
            { name: 'Cocosini Mama', color: 'legendary', value: 1200, cost: 285000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/ca/Cocosini_Mama.png/revision/latest/scale-to-width-down/97?cb=20250803012845' },
            { name: 'Pandaccini Bananini', color: 'legendary', value: 1200, cost: 300000, img: 'https://static.wikia.nocookie.net/stealabr/images/0/03/Pandaccini_Bananini.png/revision/latest/scale-to-width-down/165?cb=20250803032953' },
            { name: 'Sigma Boy', color: 'legendary', value: 1300, cost: 325000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/65/Sigma_Boy.webp/revision/latest/scale-to-width-down/185?cb=20250804183143' },
            { name: 'Pi Pi Watermelon', color: 'legendary', value: 1300, cost: 135000, img: 'https://static.wikia.nocookie.net/stealabr/images/8/84/Pi_Pi_Watermelon.png/revision/latest/scale-to-width-down/128?cb=20250803034013' },
            { name: 'Frigo Camelo', color: 'mythic', value: 1400, cost: 300000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/af/Frigocamelo.png/revision/latest/scale-to-width-down/185?cb=20250731175600' },
            { name: 'Orangutini Ananassini', color: 'mythic', value: 1700, cost: 400000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/f8/Orangutini-Ananassini-1.png/revision/latest/scale-to-width-down/185?cb=20250730164316' },
            { name: 'Rhino Toasterino', color: 'mythic', value: 2100, cost: 450000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/1a/Untitled210_20250808180116.png/revision/latest/scale-to-width-down/153?cb=20250808233001' },
            { name: 'Bombardiro Crocodilo', color: 'mythic', value: 2500, cost: 500000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/59/Bombardiro_Crocodilo_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728202417' },
            { name: 'Bruto Gialutto', color: 'mythic', value: 3000, cost: 600000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/cc/Bruto_gialutto.png/revision/latest/scale-to-width-down/185?cb=20250907175913' },
            { name: 'Bombombini Gusini', color: 'mythic', value: 5000, cost: 1000000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/9d/Bombombini_Gusini_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728200202' },
            { name: 'Cavallo Virtuso', color: 'mythic', value: 7500, cost: 2500000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/ca/Cavallo_Virtuoso.png/revision/latest/scale-to-width-down/132?cb=20250804015017' },
            { name: 'Gorillo Subwoofero', color: 'mythic', value: 8000, cost: 3000000, img: 'https://static.wikia.nocookie.net/stealabr/images/0/08/Dubstep_boy.png/revision/latest/scale-to-width-down/153?cb=20250909170929' },
            { name: 'Gorillo Watermelondrillo', color: 'mythic', value: 8000, cost: 3000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/ea/Gorillo-Watermelondrillo.png/revision/latest/scale-to-width-down/185?cb=20250730162924' },
            { name: 'Avocadorilla', color: 'mythic', value: 7500, cost: 2000000, img: 'https://static.wikia.nocookie.net/stealabr/images/8/85/Avocadorilla.png/revision/latest/scale-to-width-down/140?cb=20250803132430' },
            { name: 'Tob Tobi Tobi', color: 'mythic', value: 8500, cost: 3500000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b0/Tob_Tobi_Tobi.png/revision/latest/scale-to-width-down/185?cb=20250810085415' },
            { name: 'Ganganzelli Trulala', color: 'mythic', value: 9000, cost: 4000000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b4/Ganganzelli_Trulala.png/revision/latest/scale-to-width-down/106?cb=20250803133555' },
            { name: 'Te Te Te Sahur', color: 'mythic', value: 9500, cost: 2500000, img: 'https://static.wikia.nocookie.net/stealabr/images/3/37/Te_Te_Te_Sahur.png/revision/latest/scale-to-width-down/185?cb=20250809012256' },
            { name: 'Tracoducotulu Delapeladustuz', color: 'mythic', value: 12000, cost: 3000000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b2/Tracoducotulu_Delapeladustuz.webp/revision/latest/scale-to-width-down/185?cb=20250816054422' },
            { name: 'Lerulerulerule', color: 'mythic', value: 8700, cost: 3500000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c9/Lerulerulerule_Stealy.png/revision/latest/scale-to-width-down/118?cb=20250823231507' },
            { name: 'Los Noobinis', color: 'mythic', value: 12500, cost: 4300000, img: 'https://static.wikia.nocookie.net/stealabr/images/d/db/Noobinis.png/revision/latest/scale-to-width-down/185?cb=20250909173512' },
            { name: 'Carrotini Brainini', color: 'mythic', value: 15000, cost: 4700000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/ef/Famine.png/revision/latest/scale-to-width-down/185?cb=20250909161804' },
            { name: 'Spioniro Golubiro', color: 'mythic', value: 3500, cost: 750000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/1e/Spioniro_Golubiro_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728210331' },
            { name: 'Zibra Zubra Zibralini', color: 'mythic', value: 6000, cost: 1000000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/fc/Zibra_Zubra_Zibralini.png/revision/latest/scale-to-width-down/93?cb=20250803134054' },
            { name: 'Tigrilini Watermelini', color: 'mythic', value: 6500, cost: 1000000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/73/Tigrilini_Watermelini.png/revision/latest/scale-to-width-down/127?cb=20250803134551' },
            { name: 'Cocofanto Elefanto', color: 'god', value: 10000, cost: 5000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/eb/Cocofanto_Elefanto_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728192533' },
            { name: 'Girafa Celestre', color: 'god', value: 20000, cost: 7500000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c3/Girafa_Celestre_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728195752' },
            { name: 'Brr es Teh Patipum', color: 'god', value: 225000, cost: 40000000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/56/Brr_Es_Teh_Patipum.png/revision/latest/scale-to-width-down/120?cb=20250823194616' },
            { name: 'Tralalero Tralala', color: 'god', value: 50000, cost: 10000000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/62/Tralalero_Tralala_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728202936' },
            { name: 'Odin Din Din Dun', color: 'god', value: 75000, cost: 15000000, img: 'https://static.wikia.nocookie.net/stealabr/images/3/37/Odin_Din_Din_Dun_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728195913' },
            { name: 'Ballerino Lololo', color: 'god', value: 200000, cost: 35000000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/24/Ballerino_Lololo_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728195020' },
            { name: 'Los Orcalitos', color: 'god', value: 235000, cost: 45000000, img: 'https://static.wikia.nocookie.net/stealabr/images/3/35/Los_Orcalitos.webp/revision/latest/scale-to-width-down/120?cb=20250809055725' },
            { name: 'Tralalita Tralala', color: 'god', value: 100000, cost: 20000000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/15/Tralalita.png/revision/latest/scale-to-width-down/120?cb=20250818004150' },
            { name: 'Trigoligre Frutonni', color: 'god', value: 60000, cost: 15000000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/ce/Tigroligre-Frutonni.png/revision/latest/scale-to-width-down/120?cb=20250730174144' },
            { name: 'Orcalero Orcala', color: 'god', value: 100000, cost: 15000000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/7b/Orcalero_Orcala_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728203428' },
            { name: 'Trenostruzzo Turbo 3000', color: 'secret', value: 150000, cost: 25000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/ae/Trenostruzzo_Turbo_3000_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728193331' },
            { name: 'Bulbito Bandito Traktorito', color: 'god', value: 205000, cost: 25000000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/55/Bulbito_Bandito_Traktorito.png/revision/latest/scale-to-width-down/120?cb=20250809231034' },
            { name: 'Los Crocodillitos', color: 'god', value: 55000, cost: 12500000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/93/Newestcoollolplz.png/revision/latest/scale-to-width-down/120?cb=20250904005841' },
            { name: 'Piccione Macchina', color: 'god', value: 225000, cost: 40000000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/2d/Piccione_Macchina_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728204826' },
            { name: 'Trippi Troppi Troppa Trippa', color: 'god', value: 175000, cost: 30000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a4/Trippi_Troppi_Trooppi_TrooaaapppaaHELP_IM_ABOUT_TO_GET_INTO_A_CAR_CRASH.png/revision/latest/scale-to-width-down/120?cb=20250902182246' },
            { name: 'Los Tungtungtungcitos', color: 'god', value: 210000, cost: 37500000, img: 'https://static.wikia.nocookie.net/stealabr/images/0/0a/Los_TungTungTungCitos.webp/revision/latest/scale-to-width-down/120?cb=20250803213040' },
            { name: 'Tukanno Bananno', color: 'god', value: 100000, cost: 22500000, img: 'https://static.wikia.nocookie.net/stealabr/images/8/87/Tukanno_Bananno.png/revision/latest/scale-to-width-down/120?cb=20250803135523' },
            { name: 'Las Cappuchinas', color: 'god', value: 135000, cost: 82500000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/9f/Lascapuchinas.png/revision/latest/scale-to-width-down/120?cb=20250907160545' },
            { name: 'Orcalita Orcala', color: 'god', value: 240000, cost: 45000000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/51/IMG_2496.png/revision/latest/scale-to-width-down/120?cb=20250904120452' },
            { name: 'Cacasito Satalito', color: 'god', value: 240000, cost: 45000000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/1c/CacasitoSatalito.png/revision/latest/scale-to-width-down/120?cb=20250906192820' },
            { name: 'Tartaruga Cisterna', color: 'god', value: 250000, cost: 45000000, img: 'https://static.wikia.nocookie.net/stealabr/images/8/8d/Tartaruga_Cisternaaaa.png/revision/latest/scale-to-width-down/120?cb=20250824163835' },
            { name: 'Piccionetta Machina', color: 'god', value: 270000, cost: 47000000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/79/That_one_pink_bird_from_angry_birds.png/revision/latest/scale-to-width-down/120?cb=20250909170602' },
            { name: 'Mastodontico Telepiedone', color: 'god', value: 275000, cost: 47500000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a5/Clanker.png/revision/latest/scale-to-width-down/120?cb=20250902184428' },
            { name: 'Anpali Babel', color: 'god', value: 280000, cost: 48000000, img: 'https://static.wikia.nocookie.net/stealabr/images/8/8e/Anpali.png/revision/latest/scale-to-width-down/120?cb=20250908172611' },
            { name: 'Pakrahmatmamat', color: 'god', value: 215000, cost: 37500000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e7/Pakrah.png/revision/latest?cb=20250823233234' },
            { name: 'La Vacca Staturno Saturnita', color: 'secret', value: 250000, cost: 50000000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/58/La_Vacca_Saturno_Saturnita_%28Steal_A_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728192240' },
            { name: 'Trenostruzzo Turbo 4000', color: 'secret', value: 310000, cost: 100000000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b0/Trenostruzzo4000.png/revision/latest/scale-to-width-down/120?cb=20250906233354' },
            { name: 'Los Tralaleritos', color: 'secret', value: 500000, cost: 150000000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/2d/Los-Tralaleritos-1.png/revision/latest/scale-to-width-down/185?cb=20250730173545' },
            { name: 'Las Tralaleritas', color: 'secret', value: 650000, cost: 150000000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/ff/Las-Tralaleritas.png/revision/latest/scale-to-width-down/185?cb=20250730173322' },
            { name: 'Job Job Job Sahur', color: 'secret', value: 700000, cost: 175000000, img: 'https://static.wikia.nocookie.net/stealabr/images/0/03/Job.webp/revision/latest/scale-to-width-down/162?cb=20250817162104' },
            { name: 'Graipuss Medussi', color: 'secret', value: 1000000, cost: 250000000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/b8/Graipuss.png/revision/latest/scale-to-width-down/185?cb=20250816173622' },
            { name: 'La Grande Combinasion', color: 'secret', value: 10000000, cost: 1000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/9a/Playboi_carti.png/revision/latest/scale-to-width-down/128?cb=20250820024653' },
            { name: 'Garama and Madundung', color: 'secret', value: 50000000, cost: 10000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/ee/Garamadundung.png/revision/latest/scale-to-width-down/185?cb=20250816022557' },
            { name: 'La Sahur Combinasion', color: 'secret', value: 2000000, cost: 550000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/eb/Sahuria.png/revision/latest/scale-to-width-down/185?cb=20250909111457' },
            { name: 'Tortuginni Dragonfruitini', color: 'secret', value: 350000, cost: 500000000, img: 'https://static.wikia.nocookie.net/stealabr/images/d/d6/Torrtuginni_Dragonfrutini_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728201824' },
            { name: 'Pot Hotspot', color: 'secret', value: 2500000, cost: 500000000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/2b/Pot_Hotspot_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728203830' },
            { name: 'Las Vaquitas Saturnitas', color: 'secret', value: 750000, cost: 160000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e9/Chick_fil_a.png/revision/latest/scale-to-width-down/185?cb=20250902172807' },
            { name: 'Chicleteira Bicicleteira', color: 'secret', value: 3500000, cost: 750000000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/6c/Chicleteira-Bicicleteira.png/revision/latest/scale-to-width-down/185?cb=20250730174435' },
            { name: 'Fragola La La La', color: 'secret', value: 450000, cost: 125000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a1/Tomatt.webp/revision/latest/scale-to-width-down/164?cb=20250907134449' },
            { name: 'Agarrini la Palini', color: 'secret', value: 425000, cost: 80000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a7/Agarrini_La_Palini.webp/revision/latest/scale-to-width-down/185?cb=20250803213935' },
            { name: 'Dragon Cannelloni', color: 'secret', value: 100000000, cost: 100000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a5/Dragon_Cannelloni.png/revision/latest/scale-to-width-down/120?cb=20250812191823' },
            { name: 'Spaghetti Tualetti', color: 'secret', value: 60000000, cost: 750000000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/11/9FF4F5C6-6AD8-41A3-8E19-FFD9261102BC-removebg-preview.png/revision/latest/scale-to-width-down/185?cb=20250829000941' },
            { name: 'Los Combinasionas', color: 'secret', value: 600000, cost: 160000000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/60/Los_Combinasionas_%28v3%29.webp/revision/latest/scale-to-width-down/185?cb=20250803215407' },
            { name: 'La Karkerkar Combinasion', color: 'secret', value: 2400000, cost: 100000000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/ba/TransparentKarkerkarCombinasion.png/revision/latest/scale-to-width-down/185?cb=20250908173730' },
            { name: 'Los Hotspotsitos', color: 'secret', value: 20000000, cost: 300000000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/95/Los_Hotspotsitos2.png/revision/latest/scale-to-width-down/185?cb=20250809161117' },
            { name: 'Esok Sekolah', color: 'secret', value: 30000000, cost: 750000000, img: 'https://static.wikia.nocookie.net/stealabr/images/2/2a/EsokSekolah2.png/revision/latest/scale-to-width-down/185?cb=20250819001020' },
            { name: 'Tralaledon', color: 'secret', value: 27500000, cost: 3000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/1d/TralaledonImg.png/revision/latest/scale-to-width-down/163?cb=20250908114334' },
            { name: 'Bisonte Giuppitere', color: 'secret', value: 30000000, cost: 750000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/a7/BisonteGiuppitere.webp/revision/latest/scale-to-width-down/184?cb=20250905102714' },
            { name: 'Los Matteos', color: 'secret', value: 300000, cost: 100000000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/76/Los_Matteos.png/revision/latest/scale-to-width-down/185?cb=20250814214159' },
            { name: 'Nuclearo Dinossauro', color: 'secret', value: 15000000, cost: 2500000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e7/Nuclearo_Dinossauro_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/185?cb=20250728194858' },
            { name: 'Ketchuru and Musturu', color: 'secret', value: 42500000, cost: 7500000000, img: 'https://static.wikia.nocookie.net/stealabr/images/1/14/Ketchuru.png/revision/latest/scale-to-width-down/182?cb=20250830231943' },
            { name: 'La Supreme Combinasion', color: 'secret', value: 40000000, cost: 7000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c8/La_Supreme_Combinasion.png/revision/latest/scale-to-width-down/185?cb=20250823013550' },
            { name: 'Ketupat Kepat', color: 'secret', value: 35000000, cost: 5000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/a/ac/KetupatKepat.png/revision/latest/scale-to-width-down/157?cb=20250823224356' },
            { name: 'Strawberry Elephant', color: 'og', value: 250000000, cost: 500000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/5/58/Strawberryelephant.png/revision/latest/scale-to-width-down/120?cb=20250830235735' },
            { name: 'Carloo', color: 'admin', value: 13500, cost: 4500000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e2/Carlooooo.png/revision/latest/scale-to-width-down/120?cb=20250823225810' },
            { name: 'Alessio', color: 'admin', value: 85000, cost: 17500000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/71/Testicular_torsion.png/revision/latest/scale-to-width-down/120?cb=20250902183820' },
            { name: 'Los Bombinitos', color: 'admin', value: 220000, cost: 42500000, img: 'https://static.wikia.nocookie.net/stealabr/images/8/80/Los_Bombinitos.png/revision/latest/scale-to-width-down/120?cb=20250907165708' },
            { name: 'Crabbo Limonetta', color: 'admin', value: 235000, cost: 46000000, img: 'https://static.wikia.nocookie.net/stealabr/images/3/38/Crabbo_limonetta_transparent.png/revision/latest/scale-to-width-down/120?cb=20250902040340' },
            { name: 'Blackhole Goat', color: 'admin', value: 400000, cost: 75000000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/c9/Blackhole_Goat.png/revision/latest/scale-to-width-down/120?cb=20250823200708' },
            { name: 'Los Spyderinis', color: 'admin', value: 450000, cost: 250000000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/ff/Los_Spyderinis.png/revision/latest/scale-to-width-down/120?cb=20250823230850' },
            { name: 'Guerriro Digitale', color: 'admin', value: 550000, cost: 120000000, img: 'https://static.wikia.nocookie.net/stealabr/images/b/bc/Guerriro_Digitale.webp/revision/latest/scale-to-width-down/120?cb=20250831201543' },
            { name: 'Raccooni Jandelini', color: 'exclusive', value: 12, cost: 1300, img: 'https://static.wikia.nocookie.net/stealabr/images/2/2d/Raccooni.png/revision/latest/scale-to-width-down/120?cb=20250830161017' },
            { name: 'Gattatino Nyanino', color: 'exclusive', value: 35000, cost: 7500000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e4/Gattatin.png/revision/latest/scale-to-width-down/120?cb=20250825132851' },
            { name: 'Matteo', color: 'exclusive', value: 50000, cost: 10000000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/6e/Matteo_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728202216' },
            { name: 'Espresso Signora', color: 'exclusive', value: 70000, cost: 25000000, img: 'https://static.wikia.nocookie.net/stealabr/images/3/38/Espresso_Signora_%28Steal_a_Brainrot%29.webp/revision/latest/scale-to-width-down/120?cb=20250728193618' },
            { name: 'Unclito Samito', color: 'exclusive', value: 75000, cost: 20000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/ea/Unclito-Samito.png/revision/latest/scale-to-width-down/120?cb=20250730162038' },
            { name: 'Urubini Flamenguini', color: 'exclusive', value: 150000, cost: 30000000, img: 'https://static.wikia.nocookie.net/stealabr/images/f/f2/Flamengo%28%3F%29.png/revision/latest/scale-to-width-down/120?cb=20250815005159' },
            { name: 'Karkerkar Kurkur', color: 'exclusive', value: 300000, cost: 100000000, img: 'https://static.wikia.nocookie.net/stealabr/images/3/35/Karkerkarkurkur.png/revision/latest/scale-to-width-down/120?cb=20250809013347' },
            { name: 'Sammyini Spyderini', color: 'exclusive', value: 325000, cost: 100000000, img: 'https://static.wikia.nocookie.net/stealabr/images/4/46/Picture5.png/revision/latest/scale-to-width-down/120?cb=20250904021726' },
            { name: 'Dul Dul Dul', color: 'exclusive', value: 375000, cost: 150000000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/75/Dul_dul_dul.png/revision/latest/scale-to-width-down/120?cb=20250824025939' },
            { name: 'Chihuanini Taconini', color: 'taco', value: 45000, cost: 8500000, img: 'https://static.wikia.nocookie.net/stealabr/images/0/07/Yo_quiero_taco_bell.png/revision/latest/scale-to-width-down/120?cb=20250909222119' },
            { name: 'Tipi Topi Taco', color: 'taco', value: 75000, cost: 20000000, img: 'https://static.wikia.nocookie.net/stealabr/images/7/72/Tipi_Topi_Taco.png/revision/latest/scale-to-width-down/120?cb=20250812213834' },
            { name: 'Gattito Tacoto', color: 'taco', value: 495000, cost: 32500000, img: 'https://static.wikia.nocookie.net/stealabr/images/6/67/Gattatino_Nyaninno.png/revision/latest/scale-to-width-down/120?cb=20250909170101' },
            { name: 'Bombardini Tortinii', color: 'taco', value: 225000, cost: 50000000, img: 'https://static.wikia.nocookie.net/stealabr/images/4/44/Bombardini_Tortinii.png/revision/latest/scale-to-width-down/120?cb=20250812170949' },
            { name: 'Los Tipi Tacos', color: 'taco', value: 260000, cost: 46000000, img: 'https://static.wikia.nocookie.net/stealabr/images/e/e1/Cooldude.gif/revision/latest/scale-to-width-down/120?cb=20250903030459' },
            { name: 'Nooo My Hotspot', color: 'taco', value: 1500000, cost: 500000000, img: 'https://static.wikia.nocookie.net/stealabr/images/9/97/NoMyHotspot.png/revision/latest/scale-to-width-down/120?cb=20250818145403' },
            { name: 'Los Nooo My Hotspotsitos', color: 'taco', value: 5000000, cost: 1000000000, img: 'https://static.wikia.nocookie.net/stealabr/images/c/cb/LosNooMyHotspotsitos.png/revision/latest/scale-to-width-down/120?cb=20250903124000' }
        ];

        const mutations = [
            { name: 'Enhanced', multiplier: 1.5 },
            { name: 'Supercharged', multiplier: 2.0 },
            { name: 'Radiant', multiplier: 3.0 },
            { name: 'Silver', multiplier: 1.5 },
            { name: 'Golden', multiplier: 2.0 },
            { name: 'Diamond', multiplier: 3.0 },
            { name: 'Shiny', multiplier: 5.0 },
        ];

        const rarityGroups = {};
        rarities.forEach(r => {
            if (!rarityGroups[r.color]) rarityGroups[r.color] = [];
            rarityGroups[r.color].push(r);
        });

        const pathCategories = ['common', 'rare', 'epic', 'legendary', 'mythic', 'god', 'secret', 'og'];
        const pathCategoryWeights = [60, 15, 10, 7, 4, 2, 1, 1];
        const luckyCategories = ['admin', 'exclusive', 'taco'];
        const luckyImages = {
            admin: 'https://static.wikia.nocookie.net/stealabr/images/7/7c/AdminLuckyBlock.png/revision/latest/scale-to-width-down/120?cb=20250823213421',
            exclusive: 'https://static.wikia.nocookie.net/stealabr/images/3/3a/SecretLuckyBlock.png/revision/latest/scale-to-width-down/120?cb=20250820123947',
            taco: 'https://static.wikia.nocookie.net/stealabr/images/8/81/TacoLuckyBlock2.png/revision/latest/scale-to-width-down/120?cb=20250903122614'
        };

        const rarityOrder = {
            common: 1,
            rare: 2,
            epic: 3,
            legendary: 4,
            mythic: 5,
            god: 6,
            secret: 7,
            og: 8,
            admin: 9,
            exclusive: 10,
            taco: 11
        };

        function weightedRandom(options, weights) {
            let total = weights.reduce((a, b) => a + b, 0);
            let rand = Math.random() * total;
            let cum = 0;
            for (let i = 0; i < options.length; i++) {
                cum += weights[i];
                if (rand < cum) return options[i];
            }
            return options[0];
        }

        setInterval(createItemOnPath, 3000);

        function getRandomRarity(group) {
            if (!Array.isArray(group) || group.length === 0) {
                console.error('Group is not a valid array or is empty:', group);
                return rarityGroups['common'][0];
            }
            return group[Math.floor(Math.random() * group.length)];
        }

        function createItemOnPath() {
            if (Math.random() < 0.01) {
                createLuckyBlock();
            } else {
                createBrainrot();
            }
        }

        function createBrainrot() {
            const category = weightedRandom(pathCategories, pathCategoryWeights);
            const group = rarityGroups[category] || rarityGroups['common'];
            const rarity = getRandomRarity(group);
            const isMutated = Math.random() < 0.1; // 10% szansy na mutację
            const mutation = isMutated ? mutations[Math.floor(Math.random() * mutations.length)] : null;
            const brainrot = document.createElement('div');
            brainrot.classList.add('brainrot', rarity.color);
            const displayName = mutation ? `${rarity.name} (${mutation.name})` : rarity.name;
            const value = mutation ? rarity.value * mutation.multiplier : rarity.value;
            const cost = mutation ? rarity.cost * mutation.multiplier : rarity.cost;
            brainrot.innerHTML = `<img src="${rarity.img}" alt="${displayName}"><span>${displayName}<br>(${formatMoney(cost)})<br>+${formatMoney(value)}/s</span>`;
            brainrot.style.left = '-110px';
            brainrot.style.top = '110px';
            gameContainer.appendChild(brainrot);

            const brainrotData = {
                element: brainrot,
                rarity: {
                    name: rarity.name,
                    color: rarity.color,
                    value: value,
                    cost: cost,
                    img: rarity.img
                },
                multiplier: 1,
                position: -110,
                inBase: false,
                station: null,
                pendingMoney: 0
            };
            brainrots.push(brainrotData);

            brainrot.addEventListener('click', () => buyBrainrot(brainrotData));

            if (pathCategories.indexOf(category) >= 2) {
                setInterval(() => {
                    if (brainrotData.inBase) {
                        createParticles(brainrot.element, 3);
                    }
                }, 2000);
            }
            saveGame();
        }

        function createLuckyBlock() {
            const category = luckyCategories[Math.floor(Math.random() * luckyCategories.length)];
            const lucky = document.createElement('div');
            lucky.classList.add('lucky-block');
            const cost = 100000000;
            const imgSrc = luckyImages[category];
            lucky.innerHTML = `<img src="${imgSrc}" alt="Lucky Block"><span>Lucky ${category}<br>(${formatMoney(cost)})</span>`;
            lucky.style.left = '-110px';
            lucky.style.top = '110px';
            gameContainer.appendChild(lucky);

            const luckyData = {
                element: lucky,
                category: category,
                cost: cost,
                position: -110,
                bought: false
            };
            luckyItems.push(luckyData);

            lucky.addEventListener('click', () => buyLuckyBlock(luckyData));
            saveGame();
        }

        function buyLuckyBlock(lucky) {
            if (money >= lucky.cost && !lucky.bought) {
                money -= lucky.cost;
                lucky.bought = true;
                updateMoney();
                lucky.element.remove();
                const group = rarityGroups[lucky.category] || rarityGroups['common'];
                const rarity = getRandomRarity(group);
                const isMutated = Math.random() < 0.1; // 10% szansy na mutację
                const mutation = isMutated ? mutations[Math.floor(Math.random() * mutations.length)] : null;
                const displayName = mutation ? `${rarity.name} (${mutation.name})` : rarity.name;
                const value = mutation ? rarity.value * mutation.multiplier : rarity.value;
                const cost = mutation ? rarity.cost * mutation.multiplier : rarity.cost;
                const dropped = {
                    rarity: {
                        name: rarity.name,
                        color: rarity.color,
                        value: value,
                        cost: cost,
                        img: rarity.img
                    },
                    multiplier: 1,
                    inBase: false,
                    pendingMoney: 0
                };
                dropped.element = document.createElement('div');
                dropped.element.classList.add('brainrot', rarity.color);
                dropped.element.innerHTML = `<img src="${rarity.img}" alt="${displayName}"><span>${displayName} x${dropped.multiplier} +${formatMoney(value * dropped.multiplier)}/s</span>`;
                brainrots.push(dropped);
                transportToBase(dropped);
                createParticles(dropped.element, 20);
                saveGame();
            }
        }

        function animate() {
            const now = performance.now();
            const delta = (now - lastFrameTime) / 1000;
            lastFrameTime = now;

            brainrots.forEach(brainrot => {
                if (!brainrot.inBase && brainrot.position < 1000) {
                    brainrot.position += 50 * delta;
                    brainrot.element.style.left = brainrot.position + 'px';
                } else if (brainrot.position >= 1000 && !brainrot.inBase) {
                    brainrot.element.remove();
                    brainrots = brainrots.filter(b => b !== brainrot);
                }
            });

            luckyItems.forEach(lucky => {
                if (!lucky.bought && lucky.position < 1000) {
                    lucky.position += 50 * delta;
                    lucky.element.style.left = lucky.position + 'px';
                } else if (lucky.position >= 1000 && !lucky.bought) {
                    lucky.element.remove();
                    luckyItems = luckyItems.filter(l => l !== lucky);
                }
            });

            requestAnimationFrame(animate);
        }
        requestAnimationFrame(animate);

        function buyBrainrot(brainrot) {
            const cost = brainrot.rarity.cost;
            if (money >= cost && !brainrot.inBase) {
                money -= cost;
                updateMoney();
                transportToBase(brainrot);
                createParticles(brainrot.element, 10);
                saveGame();
            }
        }

        function transportToBase(brainrot) {
            for (let i = 0; i < stations.length; i++) {
                if (!stations[i].hasChildNodes()) {
                    brainrot.inBase = true;
                    brainrot.station = i;
                    brainrot.element.id = `brainrot-${Date.now()}-${Math.random()}`; // Unikalne ID dla drag-and-drop
                    brainrot.element.draggable = true;
                    stations[i].appendChild(brainrot.element);
                    brainrot.element.style.position = 'static';
                    brainrot.element.style.top = 'auto';
                    brainrot.element.style.left = 'auto';
                    brainrot.element.innerHTML = `<img src="${brainrot.rarity.img}" alt="${brainrot.rarity.name}"><span>${brainrot.rarity.name} x${brainrot.multiplier} +${formatMoney(brainrot.rarity.value * brainrot.multiplier)}/s</span>`;

                    const bubble = document.createElement('div');
                    bubble.classList.add('money-bubble');
                    stations[i].appendChild(bubble);
                    bubble.addEventListener('click', () => collectMoney(brainrot, bubble));

                    brainrot.element.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        sellBrainrot(brainrot);
                    });
                    brainrot.element.addEventListener('dblclick', () => mergeBrainrots(brainrot));
                    brainrot.element.addEventListener('dragstart', (e) => {
                        e.dataTransfer.setData('text/plain', brainrot.element.id);
                    });

                    // Natychmiastowe rozpoczęcie zbierania pieniędzy
                    brainrot.pendingMoney += brainrot.rarity.value * brainrot.multiplier;
                    updateBubble(bubble, brainrot.pendingMoney);

                    setInterval(() => {
                        if (brainrot.inBase) {
                            brainrot.pendingMoney += brainrot.rarity.value * brainrot.multiplier;
                            updateBubble(bubble, brainrot.pendingMoney);
                            saveGame();
                        }
                    }, 1000);

                    unlocked.add(brainrot.rarity.name); // Odblokowanie w indexie po dodaniu do bazy
                    updateIndex();
                    updateIncome();
                    saveGame();
                    return;
                }
            }
        }

        function updateBubble(bubble, amount) {
            if (amount > 0) {
                bubble.textContent = `+${formatMoney(amount)}`;
                bubble.classList.add('visible');
            } else {
                bubble.classList.remove('visible');
            }
        }

        function collectMoney(brainrot, bubble) {
            money += brainrot.pendingMoney;
            brainrot.pendingMoney = 0;
            updateBubble(bubble, 0);
            updateMoney();
            createParticles(bubble, 5);
            saveGame();
        }

        function sellBrainrot(brainrot) {
            if (brainrot.inBase) {
                const station = stations[brainrot.station];
                station.innerHTML = '';
                brainrots = brainrots.filter(b => b !== brainrot);
                money += brainrot.rarity.cost * 0.5;
                updateMoney();
                updateIncome();
                saveGame();
            }
        }

        function mergeBrainrots(brainrot) {
            if (brainrot.inBase) {
                const sameRarity = brainrots.filter(b => b.inBase && b.rarity.name === brainrot.rarity.name && b !== brainrot && b.multiplier === brainrot.multiplier);
                if (sameRarity.length > 0) {
                    const target = sameRarity[0];
                    target.multiplier += brainrot.multiplier;
                    target.element.innerHTML = `<img src="${target.rarity.img}" alt="${target.rarity.name}"><span>${target.rarity.name} x${target.multiplier} +${formatMoney(target.rarity.value * target.multiplier)}/s</span>`;
                    stations[brainrot.station].innerHTML = '';
                    brainrots = brainrots.filter(b => b !== brainrot);
                    updateIncome();
                    createParticles(target.element, 15);
                    saveGame();
                }
            }
        }

        function updateMoney() {
            moneyDisplay.textContent = `Pieniądze: ${formatMoney(money)}`;
        }

        function updateIncome() {
            incomePerSecond = brainrots.reduce((sum, b) => b.inBase ? sum + b.rarity.value * b.multiplier : sum, 0);
            incomeDisplay.textContent = `Dochód/s: ${formatMoney(incomePerSecond)}`;
        }

        function formatMoney(amount) {
            const units = ['', 'K', 'M', 'B', 'T', 'Qa', 'Qi', 'Sx', 'Sp', 'Oc', 'No', 'Dc'];
            let unitIndex = 0;
            let scaled = amount;
            while (scaled >= 1000 && unitIndex < units.length - 1) {
                scaled /= 1000;
                unitIndex++;
            }
            return `${scaled.toFixed(2)}${units[unitIndex]}`;
        }

        function createParticles(target, count) {
            const rect = target.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                particle.style.setProperty('--dx', (Math.random() - 0.5) * 100 + 'px');
                particle.style.setProperty('--dy', (Math.random() - 0.5) * 100 + 'px');
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 800);
            }
        }

        showIndexButton.addEventListener('click', () => {
            indexModal.style.display = 'flex';
            updateIndex();
        });

        indexModal.addEventListener('click', (e) => {
            if (e.target === indexModal) {
                indexModal.style.display = 'none';
            }
        });

        async function deleteData() {
           setLocalData('gameverse', 'stealABrainrot', null);
        }
        resetGameButton.addEventListener('click', () => {
            if (confirm('Czy na pewno chcesz zresetować grę? Wszystkie postępy zostaną utracone!')) {
                money = 50;
                brainrots = [];
                luckyItems = [];
                incomePerSecond = 0;
                unlocked.clear();
                stations.forEach(station => station.innerHTML = '');
                updateMoney();
                updateIncome();
                updateIndex();
                deleteData();
            }
        });

        function showBrainrotDetails(rarity) {
            const modal = document.createElement('div');
            modal.classList.add('modal');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.background = 'rgba(0, 0, 0, 0.7)';
            modal.style.display = 'flex';
            modal.style.justifyContent = 'center';
            modal.style.alignItems = 'center';
            modal.style.zIndex = '2000';

            const content = document.createElement('div');
            content.style.background = '#1e293b';
            content.style.borderRadius = '10px';
            content.style.padding = '20px';
            content.style.color = '#fff';
            content.style.maxWidth = '400px';
            content.style.textAlign = 'center';
            content.innerHTML = `
                <img src="${rarity.img}" alt="${rarity.name}" style="width: 100px; height: 100px; border-radius: 50%; border: 2px solid #fff;">
                <h3>${rarity.name}</h3>
                <p>Rzadkość: ${rarity.color.charAt(0).toUpperCase() + rarity.color.slice(1)}</p>
                <p>Wartość: +${formatMoney(rarity.value)}/s</p>
                <p>Koszt: ${formatMoney(rarity.cost)}</p>
                <button onclick="this.parentElement.parentElement.remove()">Zamknij</button>
            `;
            modal.appendChild(content);
            document.body.appendChild(modal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function updateIndex() {
            indexSections.innerHTML = '';
            let filtered = rarities.filter(r => indexFilter.value === '' || r.color === indexFilter.value);
            if (indexSearch.value) {
                filtered = filtered.filter(r => r.name.toLowerCase().includes(indexSearch.value.toLowerCase()));
            }
            const sortOption = indexSort.value;
            filtered.sort((a, b) => {
                if (sortOption === 'rarity-asc') {
                    return rarityOrder[a.color] - rarityOrder[b.color];
                } else if (sortOption === 'rarity-desc') {
                    return rarityOrder[b.color] - rarityOrder[a.color];
                } else if (sortOption === 'name-asc') {
                    return a.name.localeCompare(b.name);
                } else if (sortOption === 'name-desc') {
                    return b.name.localeCompare(a.name);
                } else if (sortOption === 'value-asc') {
                    return a.value - b.value;
                } else if (sortOption === 'value-desc') {
                    return b.value - a.value;
                }
            });

            const grouped = {};
            filtered.forEach(r => {
                if (!grouped[r.color]) grouped[r.color] = [];
                grouped[r.color].push(r);
            });

            Object.keys(grouped).sort((a, b) => rarityOrder[a] - rarityOrder[b]).forEach(color => {
                const section = document.createElement('div');
                section.classList.add('rarity-section');
                section.innerHTML = `<h3>${color.charAt(0).toUpperCase() + color.slice(1)}</h3><div class="index-grid"></div>`;
                const grid = section.querySelector('.index-grid');
                grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
                grouped[color].forEach(r => {
                    const item = document.createElement('div');
                    item.classList.add('index-item');
                    item.innerHTML = `<img src="${r.img}" alt="${r.name}" style="width: 50px; height: 50px; border-radius: 50%; border: 2px solid #fff;">`;
                    item.style.opacity = unlocked.has(r.name) ? '1' : '0.2';
                    item.style.cursor = 'pointer';
                    item.addEventListener('click', () => showBrainrotDetails(r));
                    grid.appendChild(item);
                });
                indexSections.appendChild(section);
            });
        }

        indexSearch.addEventListener('input', updateIndex);
        indexSort.addEventListener('change', updateIndex);
        indexFilter.addEventListener('change', updateIndex);

        async function saveGame() {
            const gameState = {
                money: money,
                brainrots: brainrots.filter(b => b.inBase).map(b => ({
                    rarity: b.rarity.name,
                    multiplier: b.multiplier,
                    station: b.station,
                    pendingMoney: b.pendingMoney
                })),
                unlocked: Array.from(unlocked)
            };
            setLocalData('gameverse', 'stealABrainrot', JSON.stringify(gameState));
        }

        async function loadGame() {
            const saved = getLocalData('gameverse', 'stealABrainrot');
            if (saved) {
                const gameState = JSON.parse(saved);
                money = gameState.money || 50;
                unlocked = new Set(gameState.unlocked || []);
                brainrots = [];
                gameState.brainrots.forEach(b => {
                    const rarity = rarities.find(r => r.name === b.rarity);
                    if (rarity && b.station < stations.length) {
                        const brainrot = {
                            rarity: rarity,
                            multiplier: b.multiplier,
                            inBase: true,
                            station: b.station,
                            pendingMoney: b.pendingMoney
                        };
                        brainrot.element = document.createElement('div');
                        brainrot.element.classList.add('brainrot', rarity.color);
                        brainrot.element.id = `brainrot-${Date.now()}-${Math.random()}`;
                        brainrot.element.draggable = true;
                        brainrot.element.innerHTML = `<img src="${rarity.img}" alt="${rarity.name}"><span>${rarity.name} x${b.multiplier} +${formatMoney(rarity.value * b.multiplier)}/s</span>`;
                        stations[b.station].appendChild(brainrot.element);
                        brainrots.push(brainrot);

                        const bubble = document.createElement('div');
                        bubble.classList.add('money-bubble');
                        stations[b.station].appendChild(bubble);
                        updateBubble(bubble, b.pendingMoney);
                        bubble.addEventListener('click', () => collectMoney(brainrot, bubble));

                        brainrot.element.addEventListener('contextmenu', (e) => {
                            e.preventDefault();
                            sellBrainrot(brainrot);
                        });
                        brainrot.element.addEventListener('dblclick', () => mergeBrainrots(brainrot));
                        brainrot.element.addEventListener('dragstart', (e) => {
                            e.dataTransfer.setData('text/plain', brainrot.element.id);
                        });

                        setInterval(() => {
                            if (brainrot.inBase) {
                                brainrot.pendingMoney += brainrot.rarity.value * brainrot.multiplier;
                                updateBubble(bubble, brainrot.pendingMoney);
                                saveGame();
                            }
                        }, 1000);
                    }
                });
                updateMoney();
                updateIncome();
                updateIndex();
            }
        }

        loadGame();

        // Drag-and-drop dla stacji
        stations.forEach(station => {
            station.addEventListener('dragover', (e) => {
                e.preventDefault();
                station.classList.add('drag-over');
            });
            station.addEventListener('dragleave', () => {
                station.classList.remove('drag-over');
            });
            station.addEventListener('drop', (e) => {
                e.preventDefault();
                station.classList.remove('drag-over');
                const draggedId = e.dataTransfer.getData('text/plain');
                const dragged = document.getElementById(draggedId);
                if (dragged && dragged.classList.contains('brainrot')) {
                    const sourceBrainrot = brainrots.find(b => b.element === dragged);
                    const sourceStation = stations[sourceBrainrot.station];
                    const targetStation = station;
                    if (sourceStation !== targetStation) {
                        if (targetStation.hasChildNodes()) {
                            // Merge, jeśli ta sama rzadkość i mnożnik
                            const targetBrainrot = brainrots.find(b => b.element === targetStation.firstChild);
                            if (targetBrainrot.rarity.name === sourceBrainrot.rarity.name && targetBrainrot.multiplier === sourceBrainrot.multiplier) {
                                targetBrainrot.multiplier += sourceBrainrot.multiplier;
                                targetBrainrot.element.innerHTML = `<img src="${targetBrainrot.rarity.img}" alt="${targetBrainrot.rarity.name}"><span>${targetBrainrot.rarity.name} x${targetBrainrot.multiplier} +${formatMoney(targetBrainrot.rarity.value * targetBrainrot.multiplier)}/s</span>`;
                                sourceStation.innerHTML = '';
                                brainrots = brainrots.filter(b => b !== sourceBrainrot);
                                updateIncome();
                                createParticles(targetBrainrot.element, 15);
                                saveGame();
                            }
                        } else {
                            // Przesunięcie na pustą stację
                            targetStation.appendChild(dragged);
                            sourceBrainrot.station = Array.from(stations).indexOf(targetStation);
                            sourceStation.innerHTML = '';
                            saveGame();
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>